import{p as S}from"./props.BDrISBpZ.js";import{G as re,H as Be,I as Qe,J as Pe,u as D,K as Oe,h as G,L as Ve,p as l,x as he,M as Fe,N as Ye,O as me,P as ue,Q as ce,R as Z,S as qe,U as Ge,V as ke,W as Te,X as Ue,Y as de,Z as Se,a as xe,_ as ye,t as V,$ as pe,a0 as _e,a1 as Xe,a2 as ze,a3 as Je,a4 as Ke,a5 as be,a6 as We,a7 as Ze,a8 as je,a9 as $e,aa as Ee,q as ea,ab as aa,ac as ta,ad as ra,ae as sa,C as se,af as Ie,z as A,ag as De,l as E,m as T,o as L,r as w,v as B,ah as ne,F,k,D as le,g as Ce,j,y as na}from"./render.BjE8OOHw.js";import{i as M,s as X,a as ge,r as la}from"./attributes.CgO6x6_6.js";import{i as oe}from"./lifecycle.i0jzmk_D.js";function Ae(t){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function oa(t){re===null&&Ae(),Be&&re.l!==null?ca(re).m.push(t):Qe(()=>{const e=D(t);if(typeof e=="function")return e})}function ia(t,e,{bubbles:a=!1,cancelable:r=!1}={}){return new CustomEvent(t,{detail:e,bubbles:a,cancelable:r})}function ua(){const t=re;return t===null&&Ae(),(e,a,r)=>{const n=t.s.$$events?.[e];if(n){const o=Pe(n)?n.slice():[n],d=ia(e,a,r);for(const u of o)u.call(t.x,d);return!d.defaultPrevented}return!0}}function ca(t){var e=t.l;return e.u??={a:[],b:[],m:[]}}function $(t,e){return e}function da(t,e,a,r){for(var n=[],o=e.length,d=0;d<o;d++)Xe(e[d].e,n,!0);var u=o>0&&n.length===0&&a!==null;if(u){var f=a.parentNode;ze(f),f.append(a),r.clear(),U(t,e[0].prev,e[o-1].next)}Je(n,()=>{for(var g=0;g<o;g++){var i=e[g];u||(r.delete(i.k),U(t,i.prev,i.next)),Ke(i.e,!u)}})}function ee(t,e,a,r,n,o=null){var d=t,u={flags:e,items:new Map,first:null},f=(e&Ee)!==0;if(f){var g=t;d=G?ue(je(g)):g.appendChild($e())}G&&Ve();var i=null,b=!1,s=he(()=>{var h=a();return Pe(h)?h:h==null?[]:Se(h)});Oe(()=>{var h=l(s),c=h.length;if(b&&c===0)return;b=c===0;let y=!1;if(G){var m=Fe(d)===Ye;m!==(c===0)&&(d=me(),ue(d),ce(!1),y=!0)}if(G){for(var P=null,I,p=0;p<c;p++){if(Z.nodeType===qe&&Z.data===Ge){d=Z,y=!0,ce(!1);break}var v=h[p],x=r(v,p);I=Le(Z,u,P,null,v,x,p,n,e,a),u.items.set(x,I),P=I}c>0&&ue(me())}G||va(h,u,d,n,e,r,a),o!==null&&(c===0?i?ke(i):i=Te(()=>o(d)):i!==null&&Ue(i,()=>{i=null})),y&&ce(!0),l(s)}),G&&(d=Z)}function va(t,e,a,r,n,o,d){var u=(n&aa)!==0,f=(n&(be|_e))!==0,g=t.length,i=e.items,b=e.first,s=b,h,c=null,y,m=[],P=[],I,p,v,x;if(u)for(x=0;x<g;x+=1)I=t[x],p=o(I,x),v=i.get(p),v!==void 0&&(v.a?.measure(),(y??=new Set).add(v));for(x=0;x<g;x+=1){if(I=t[x],p=o(I,x),v=i.get(p),v===void 0){var z=s?s.e.nodes_start:a;c=Le(z,e,c,c===null?e.first:c.next,I,p,x,r,n,d),i.set(p,c),m=[],P=[],s=c.next;continue}if(f&&fa(v,I,x,n),(v.e.f&de)!==0&&(ke(v.e),u&&(v.a?.unfix(),(y??=new Set).delete(v))),v!==s){if(h!==void 0&&h.has(v)){if(m.length<P.length){var N=P[0],_;c=N.prev;var R=m[0],Q=m[m.length-1];for(_=0;_<m.length;_+=1)we(m[_],N,a);for(_=0;_<P.length;_+=1)h.delete(P[_]);U(e,R.prev,Q.next),U(e,c,R),U(e,Q,N),s=N,c=Q,x-=1,m=[],P=[]}else h.delete(v),we(v,s,a),U(e,v.prev,v.next),U(e,v,c===null?e.first:c.next),U(e,c,v),c=v;continue}for(m=[],P=[];s!==null&&s.k!==p;)(s.e.f&de)===0&&(h??=new Set).add(s),P.push(s),s=s.next;if(s===null)continue;v=s}m.push(v),c=v,s=v.next}if(s!==null||h!==void 0){for(var H=h===void 0?[]:Se(h);s!==null;)(s.e.f&de)===0&&H.push(s),s=s.next;var C=H.length;if(C>0){var Y=(n&Ee)!==0&&g===0?a:null;if(u){for(x=0;x<C;x+=1)H[x].a?.measure();for(x=0;x<C;x+=1)H[x].a?.fix()}da(e,H,Y,i)}}u&&ea(()=>{if(y!==void 0)for(v of y)v.a?.apply()}),xe.first=e.first&&e.first.e,xe.last=c&&c.e}function fa(t,e,a,r){(r&be)!==0&&ye(t.v,e),(r&_e)!==0?ye(t.i,a):t.i=a}function Le(t,e,a,r,n,o,d,u,f,g){var i=(f&be)!==0,b=(f&We)===0,s=i?b?V(n,!1,!1):pe(n):n,h=(f&_e)===0?d:pe(d),c={i:h,v:s,k:o,a:null,e:null,prev:a,next:r};try{return c.e=Te(()=>u(t,s,h,g),G),c.e.prev=a&&a.e,c.e.next=r&&r.e,a===null?e.first=c:(a.next=c,a.e.next=c.e),r!==null&&(r.prev=c,r.e.prev=c.e),c}finally{}}function we(t,e,a){for(var r=t.next?t.next.e.nodes_start:a,n=e?e.e.nodes_start:a,o=t.e.nodes_start;o!==r;){var d=Ze(o);n.before(o),o=d}}function U(t,e,a){e===null?t.first=a:(e.next=a,e.e.next=a&&a.e),a!==null&&(a.prev=e,a.e.prev=e&&e.e)}function ga(t,e,a=e){var r=ta();ra(t,"input",n=>{var o=n?t.defaultValue:t.value;if(o=ve(t)?fe(o):o,a(o),r&&o!==(o=e())){var d=t.selectionStart,u=t.selectionEnd;t.value=o??"",u!==null&&(t.selectionStart=d,t.selectionEnd=Math.min(u,t.value.length))}}),(G&&t.defaultValue!==t.value||D(e)==null&&t.value)&&a(ve(t)?fe(t.value):t.value),sa(()=>{var n=e();ve(t)&&n===fe(t.value)||t.type==="date"&&!n&&!t.value||n!==t.value&&(t.value=n??"")})}function ve(t){var e=t.type;return e==="number"||e==="range"}function fe(t){return t===""?null:+t}var ha=E('<img class="w-full h-48 object-cover"/>'),_a=E('<a class="text-xs px-2 py-0.5 rounded bg-blue-100 text-blue-800 hover:bg-blue-200 dark:bg-blue-900 dark:text-blue-200 dark:hover:bg-blue-800 transition-colors"> </a>'),ba=E('<div class="flex gap-1"></div>'),ma=E('<article class="article-card bg-white dark:bg-gray-800 rounded-lg shadow-md overflow-hidden hover:shadow-lg transition-shadow"><!> <div class="p-6"><h2 class="text-xl font-bold mb-2 text-gray-900 dark:text-white"><a class="hover:text-blue-600 dark:hover:text-blue-400"> </a></h2> <p class="text-gray-600 dark:text-gray-300 mb-4"> </p> <div class="flex justify-between items-center"><time class="text-sm text-gray-500 dark:text-gray-400"> </time> <!></div></div></article>');function Me(t,e){se(e,!1);const a=V();let r=S(e,"post",8);console.log("--- post ---"),console.log(r());function n(){return r().data?{title:r().data.title,description:r().data.description,pubDate:r().data.pubDate,tags:r().data.tags||[],heroImage:r().data.heroImage}:{title:r().title,description:r().description,pubDate:new Date(r().pubDate),tags:r().tags||[],heroImage:r().heroImage}}Ie(()=>{},()=>{A(a,n())}),De(),oe();var o=ma(),d=T(o);{var u=p=>{var v=ha();B(()=>{X(v,"src",(l(a),D(()=>l(a).heroImage))),X(v,"alt",(l(a),D(()=>l(a).title)))}),k(p,v)};M(d,p=>{l(a),D(()=>l(a).heroImage)&&p(u)})}var f=L(d,2),g=T(f),i=T(g),b=T(i,!0);w(i),w(g);var s=L(g,2),h=T(s,!0);w(s);var c=L(s,2),y=T(c),m=T(y,!0);w(y);var P=L(y,2);{var I=p=>{var v=ba();ee(v,5,()=>(l(a),D(()=>l(a).tags)),$,(x,z)=>{var N=_a(),_=T(N);w(N),B(()=>{X(N,"href",`/blog/tag/${l(z)}/`),F(_,`#${l(z)??""}`)}),k(x,N)}),w(v),k(p,v)};M(P,p=>{l(a),D(()=>l(a).tags&&l(a).tags.length>0)&&p(I)})}w(c),w(f),w(o),B(p=>{X(i,"href",(ne(r()),D(()=>`/blog/${r().id||r().slug}/`))),F(b,(l(a),D(()=>l(a).title))),F(h,(l(a),D(()=>l(a).description))),F(m,p)},[()=>(l(a),D(()=>l(a).pubDate.toLocaleDateString("es-ES",{year:"numeric",month:"short",day:"numeric"})))],he),k(t,o),le()}var xa=E('<a class="px-3 py-2 text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-md hover:bg-gray-50 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700">Anterior</a>'),ya=E("<a> </a>"),pa=E('<a class="px-3 py-2 text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-md hover:bg-gray-50 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700">Siguiente</a>'),wa=E('<div class="mt-12 flex justify-center"><nav class="flex items-center space-x-2"><!> <!> <!></nav></div>');function Ne(t,e){let a=S(e,"currentPage",8,1),r=S(e,"totalPages",8,1);var n=Ce(),o=j(n);{var d=u=>{var f=wa(),g=T(f),i=T(g);{var b=y=>{var m=xa();B(()=>X(m,"href",a()===2?"/blog/":`/blog/page/${a()-1}/`)),k(y,m)};M(i,y=>{a()>1&&y(b)})}var s=L(i,2);ee(s,1,()=>(ne(r()),D(()=>Array.from({length:r()},(y,m)=>m+1))),$,(y,m)=>{var P=ya(),I=T(P,!0);w(P),B(()=>{X(P,"href",l(m)===1?"/blog/":`/blog/page/${l(m)}/`),ge(P,1,`px-3 py-2 text-sm font-medium rounded-md ${l(m)===a()?"bg-blue-500 text-white":"text-gray-500 bg-white border border-gray-300 hover:bg-gray-50 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700"}`),F(I,l(m))}),k(y,P)});var h=L(s,2);{var c=y=>{var m=pa();B(()=>X(m,"href",`/blog/page/${a()+1}/`)),k(y,m)};M(h,y=>{a()<r()&&y(c)})}w(g),w(f),k(u,f)};M(o,u=>{r()>1&&u(d)})}k(t,n)}var Pa=E('<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"></div> <!>',1);function ka(t,e){let a=S(e,"posts",8),r=S(e,"showPagination",8,!1),n=S(e,"currentPage",8,1),o=S(e,"totalPages",8,1);S(e,"currentTag",8,void 0);var d=Pa(),u=j(d);ee(u,5,a,$,(i,b)=>{Me(i,{get post(){return l(b)}})}),w(u);var f=L(u,2);{var g=i=>{Ne(i,{get currentPage(){return n()},get totalPages(){return o()}})};M(f,i=>{r()&&i(g)})}k(t,d)}var Ta=E("<a> </a>"),Sa=E('<h1 class="text-4xl font-extrabold mb-6"> </h1> <div class="mb-8 flex flex-wrap gap-2"><a href="/blog/">Todos los artículos</a> <!></div>',1);function Ea(t,e){let a=S(e,"currentTag",8),r=S(e,"allTags",8);var n=Sa(),o=j(n),d=T(o,!0);w(o);var u=L(o,2),f=T(u),g=L(f,2);ee(g,1,r,$,(i,b)=>{var s=Ta(),h=T(s);w(s),B(()=>{X(s,"href",`/blog/tag/${l(b)}/`),ge(s,1,`text-xs px-2 py-0.5 rounded font-semibold ${a()===l(b)?"bg-blue-500 text-white":"bg-blue-100 text-blue-800 hover:bg-blue-200"}`),F(h,`#${l(b)??""}`)}),k(i,s)}),w(u),B(()=>{F(d,a()?`Artículos con tag: ${a()}`:"Artículos, Tutoriales & Historias"),ge(f,1,`text-xs px-2 py-0.5 rounded font-semibold ${a()?"bg-blue-100 text-blue-800 hover:bg-blue-200":"bg-blue-500 text-white"}`)}),k(t,n)}var Ia=E('<div class="mt-2 text-sm text-gray-600"> </div>'),Da=E('<div class="mb-10"><input type="text" placeholder="Buscar artículos..." class="w-full md:w-1/2 px-4 py-2 rounded border border-gray-300 dark:border-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500 transition"/> <!></div>');function Ca(t,e){se(e,!1);let a=S(e,"searchQuery",12),r=S(e,"isSearching",8),n=S(e,"resultsCount",8);const o=ua();function d(b){o("search",b.target.value)}oe();var u=Da(),f=T(u);la(f);var g=L(f,2);{var i=b=>{var s=Ia(),h=T(s);w(s),B(()=>F(h,`${n()??""} resultado${n()!==1?"s":""} encontrado${n()!==1?"s":""}`)),k(b,s)};M(g,b=>{r()&&b(i)})}w(u),ga(f,a),na("input",f,d),k(t,u),le()}var Aa=E('<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"></div>'),La=E('<div class="text-center py-12"><p class="text-gray-500 dark:text-gray-400 text-lg"> </p></div>');function Ma(t,e){se(e,!1);let a=S(e,"filteredPosts",24,()=>[]),r=S(e,"searchQuery",8);console.log("--- filteredPosts ---"),console.log(a()),oe();var n=Ce(),o=j(n);{var d=f=>{var g=Aa();ee(g,5,a,$,(i,b)=>{Me(i,{get post(){return l(b)}})}),w(g),k(f,g)},u=f=>{var g=La(),i=T(g),b=T(i);w(i),w(g),B(()=>F(b,`No se encontraron artículos que coincidan con "${r()??""}"`)),k(f,g)};M(o,f=>{ne(a()),D(()=>a()&&a().length>0)?f(d):f(u,!1)})}k(t,n),le()}var Na=E('<div class="text-center py-12"><div class="inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"></div> <p class="mt-2 text-gray-500">Cargando índice de búsqueda...</p></div>'),Ra=E('<div class="text-center py-12"><div class="inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"></div> <p class="mt-2 text-gray-500">Buscando artículos...</p></div>'),Ha=E("<!> <!>",1),Ba=E('<div class="main-container py-24"><!> <!> <!></div>');function Ya(t,e){se(e,!1);const a=V();let r=S(e,"postsResult",8),n=S(e,"currentTag",8),o=S(e,"totalPages",8),d=S(e,"currentPage",8),u=V(""),f=V([]),g=V(!1),i=V(!1),b=V(!1),s=[],h=V({currentPage:1,totalPages:1,totalPosts:0}),c;async function y(){if(!l(b)){A(b,!0);try{console.log("Loading search index...");const _=await fetch("/api/posts.json");_.ok?(s=await _.json(),console.log(`Search index loaded with ${s.length} posts`)):console.error("Failed to load search index:",_.status,_.statusText)}catch(_){console.error("Failed to load search index:",_)}finally{A(b,!1)}}}function m(_,R=1){if(!_.trim()){A(g,!1),A(f,[]);return}if(!s||s.length===0){console.warn("Search index not loaded yet"),A(i,!1);return}A(i,!0),A(g,!0),setTimeout(()=>{const Q=_.toLowerCase();let H=s.filter(O=>{const K=O.title.toLowerCase(),ie=O.description.toLowerCase(),W=O.tags.join(" ").toLowerCase(),Re=K.includes(Q)||ie.includes(Q)||W.includes(Q),He=!n()||O.tags.includes(n());return Re&&He});H.sort((O,K)=>new Date(K.pubDate).getTime()-new Date(O.pubDate).getTime());const C=12,Y=H.length,ae=Math.ceil(Y/C),te=(R-1)*C,q=te+C,J=H.slice(te,q);A(f,J),A(h,{currentPage:R,totalPages:ae,totalPosts:Y,hasNextPage:R<ae,hasPrevPage:R>1}),A(i,!1)},100)}function P(_){A(u,_),c&&clearTimeout(c),c=setTimeout(()=>{!s||s.length===0?y().then(()=>{m(_,1)}):m(_,1)},300)}oa(()=>{y()}),Ie(()=>ne(r()),()=>{A(a,Array.from(new Set(r().flatMap(_=>_.data.tags??[]))))}),De(),oe();var I=Ba(),p=T(I);Ea(p,{get currentTag(){return n()},get allTags(){return l(a)}});var v=L(p,2);Ca(v,{get isSearching(){return l(g)},get resultsCount(){return l(h),D(()=>l(h).totalPosts)},get searchQuery(){return l(u)},set searchQuery(_){A(u,_)},$$events:{search:_=>P(_.detail)},$$legacy:!0});var x=L(v,2);{var z=_=>{var R=Na();k(_,R)},N=(_,R)=>{{var Q=C=>{var Y=Ra();k(C,Y)},H=(C,Y)=>{{var ae=q=>{var J=Ha(),O=j(J);Ma(O,{get filteredPosts(){return l(f)},get searchQuery(){return l(u)}});var K=L(O,2);{var ie=W=>{Ne(W,{get currentPage(){return l(h),D(()=>l(h).currentPage)},get totalPages(){return l(h),D(()=>l(h).totalPages)}})};M(K,W=>{l(h),D(()=>l(h).totalPages>1)&&W(ie)})}k(q,J)},te=q=>{const J=he(()=>o()>1);ka(q,{get posts(){return r()},get showPagination(){return l(J)},get currentPage(){return d()},get totalPages(){return o()},get currentTag(){return n()}})};M(C,q=>{l(g)?q(ae):q(te,!1)},Y)}};M(_,C=>{l(i)?C(Q):C(H,!1)},R)}};M(x,_=>{l(b)?_(z):_(N,!1)})}w(I),k(t,I),le()}export{Ya as default};
