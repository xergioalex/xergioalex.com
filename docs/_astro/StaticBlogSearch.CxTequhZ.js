import{p as B}from"./props.BYwaM6m8.js";import{z as le,A as Ie,C as Ve,D as Fe,F as De,u as C,G as Ye,h as W,H as qe,l as u,I as Ce,J as Ge,K as Ue,L as ye,M as ge,N as he,O as re,P as We,Q as Xe,R as pe,S as ze,U as j,V as Te,W as ke,m as G,X as Se,Y as Ae,Z as ie,_ as Me,$ as Je,a0 as ue,a1 as Ke,a2 as _e,a3 as Le,a4 as Ze,a5 as je,a6 as $e,a7 as ea,a as aa,a8 as ta,a9 as Ne,q as ra,aa as sa,ab as na,ac as la,ad as oa,ae as ia,x as $,af as Re,p as R,ag as He,g as L,j as k,k as O,r as E,t as K,ah as Be,ai as X,d as I,v as ee,c as oe,f as Z,o as ua}from"./render.BYNjtQHu.js";import{i as q,s as se,b as J,a as Ee,r as ca}from"./props.xoKaIrVE.js";import{i as Pe}from"./lifecycle.DTNBFYwF.js";function da(t){le===null&&Ie(),Ve&&le.l!==null?ga(le).m.push(t):Fe(()=>{const a=C(t);if(typeof a=="function")return a})}function fa(t,a,{bubbles:e=!1,cancelable:r=!1}={}){return new CustomEvent(t,{detail:a,bubbles:e,cancelable:r})}function va(){const t=le;return t===null&&Ie(),(a,e,r)=>{const s=t.s.$$events?.[a];if(s){const n=De(s)?s.slice():[s],l=fa(a,e,r);for(const d of n)d.call(t.x,l);return!l.defaultPrevented}return!0}}function ga(t){var a=t.l;return a.u??={a:[],b:[],m:[]}}function ce(t,a){return a}function ha(t,a,e){for(var r=t.items,s=[],n=a.length,l=0;l<n;l++)je(a[l].e,s,!0);var d=n>0&&s.length===0&&e!==null;if(d){var v=e.parentNode;$e(v),v.append(e),r.clear(),Y(t,a[0].prev,a[n-1].next)}ea(s,()=>{for(var g=0;g<n;g++){var f=a[g];d||(r.delete(f.k),Y(t,f.prev,f.next)),Le(f.e,!d)}})}function de(t,a,e,r,s,n=null){var l=t,d={flags:a,items:new Map,first:null},v=(a&Ne)!==0;if(v){var g=t;l=W?ge(ta(g)):g.appendChild(ke())}W&&qe();var f=null,m=!1,_=new Map,p=Ce(()=>{var P=e();return De(P)?P:P==null?[]:Ae(P)}),c,x;function b(){_a(x,c,d,_,l,s,a,r,e),n!==null&&(c.length===0?f?Me(f):f=pe(()=>n(l)):f!==null&&Je(f,()=>{f=null}))}Ye(()=>{x??=aa,c=u(p);var P=c.length;if(m&&P===0)return;m=P===0;let y=!1;if(W){var w=Ge(l)===Ue;w!==(P===0)&&(l=ye(),ge(l),he(!1),y=!0)}if(W){for(var T=null,S,o=0;o<P;o++){if(re.nodeType===We&&re.data===Xe){l=re,y=!0,he(!1);break}var h=c[o],i=r(h,o);S=we(re,d,T,null,h,i,o,s,a,e),d.items.set(i,S),T=S}P>0&&ge(ye())}if(W)P===0&&n&&(f=pe(()=>n(l)));else if(ze()){var A=new Set,V=j;for(o=0;o<P;o+=1){h=c[o],i=r(h,o);var H=d.items.get(i)??_.get(i);H?(a&(ue|ie))!==0&&Qe(H,h,o,a):(S=we(null,d,null,null,h,i,o,s,a,e,!0),_.set(i,S)),A.add(i)}for(const[D,N]of d.items)A.has(D)||V.skipped_effects.add(N.e);V.add_callback(b)}else b();y&&he(!0),u(p)}),W&&(l=re)}function _a(t,a,e,r,s,n,l,d,v){var g=(l&sa)!==0,f=(l&(ue|ie))!==0,m=a.length,_=e.items,p=e.first,c=p,x,b=null,P,y=[],w=[],T,S,o,h;if(g)for(h=0;h<m;h+=1)T=a[h],S=d(T,h),o=_.get(S),o!==void 0&&(o.a?.measure(),(P??=new Set).add(o));for(h=0;h<m;h+=1){if(T=a[h],S=d(T,h),o=_.get(S),o===void 0){var i=r.get(S);if(i!==void 0){r.delete(S),_.set(S,i);var A=b?b.next:c;Y(e,b,i),Y(e,i,A),me(i,A,s),b=i}else{var V=c?c.e.nodes_start:s;b=we(V,e,b,b===null?e.first:b.next,T,S,h,n,l,v)}_.set(S,b),y=[],w=[],c=b.next;continue}if(f&&Qe(o,T,h,l),(o.e.f&_e)!==0&&(Me(o.e),g&&(o.a?.unfix(),(P??=new Set).delete(o))),o!==c){if(x!==void 0&&x.has(o)){if(y.length<w.length){var H=w[0],D;b=H.prev;var N=y[0],Q=y[y.length-1];for(D=0;D<y.length;D+=1)me(y[D],H,s);for(D=0;D<w.length;D+=1)x.delete(w[D]);Y(e,N.prev,Q.next),Y(e,b,N),Y(e,Q,H),c=H,b=Q,h-=1,y=[],w=[]}else x.delete(o),me(o,c,s),Y(e,o.prev,o.next),Y(e,o,b===null?e.first:b.next),Y(e,b,o),b=o;continue}for(y=[],w=[];c!==null&&c.k!==S;)(c.e.f&_e)===0&&(x??=new Set).add(c),w.push(c),c=c.next;if(c===null)continue;o=c}y.push(o),b=o,c=o.next}if(c!==null||x!==void 0){for(var F=x===void 0?[]:Ae(x);c!==null;)(c.e.f&_e)===0&&F.push(c),c=c.next;var z=F.length;if(z>0){var ae=(l&Ne)!==0&&m===0?s:null;if(g){for(h=0;h<z;h+=1)F[h].a?.measure();for(h=0;h<z;h+=1)F[h].a?.fix()}ha(e,F,ae)}}g&&ra(()=>{if(P!==void 0)for(o of P)o.a?.apply()}),t.first=e.first&&e.first.e,t.last=b&&b.e;for(var M of r.values())Le(M.e);r.clear()}function Qe(t,a,e,r){(r&ue)!==0&&Te(t.v,a),(r&ie)!==0?Te(t.i,e):t.i=e}function we(t,a,e,r,s,n,l,d,v,g,f){var m=(v&ue)!==0,_=(v&Ke)===0,p=m?_?G(s,!1,!1):Se(s):s,c=(v&ie)===0?l:Se(l),x={i:c,v:p,k:n,a:null,e:null,prev:e,next:r};try{if(t===null){var b=document.createDocumentFragment();b.append(t=ke())}return x.e=pe(()=>d(t,p,c,g),W),x.e.prev=e&&e.e,x.e.next=r&&r.e,e===null?f||(a.first=x):(e.next=x,e.e.next=x.e),r!==null&&(r.prev=x,r.e.prev=x.e),x}finally{}}function me(t,a,e){for(var r=t.next?t.next.e.nodes_start:e,s=a?a.e.nodes_start:e,n=t.e.nodes_start;n!==null&&n!==r;){var l=Ze(n);s.before(n),n=l}}function Y(t,a,e){a===null?t.first=e:(a.next=e,a.e.next=e&&e.e),e!==null&&(e.prev=a,e.e.prev=a&&a.e)}function ma(t,a,e=a){var r=new WeakSet;na(t,"input",async s=>{var n=s?t.defaultValue:t.value;if(n=be(t)?xe(n):n,e(n),j!==null&&r.add(j),await la(),n!==(n=a())){var l=t.selectionStart,d=t.selectionEnd;t.value=n??"",d!==null&&(t.selectionStart=l,t.selectionEnd=Math.min(d,t.value.length))}}),(W&&t.defaultValue!==t.value||C(a)==null&&t.value)&&(e(be(t)?xe(t.value):t.value),j!==null&&r.add(j)),oa(()=>{var s=a();if(t===document.activeElement){var n=ia??j;if(r.has(n))return}be(t)&&s===xe(t.value)||t.type==="date"&&!s&&!t.value||s!==t.value&&(t.value=s??"")})}function be(t){var a=t.type;return a==="number"||a==="range"}function xe(t){return t===""?null:+t}var ba=L('<img class="w-full h-48 object-cover"/>'),xa=L('<a class="text-xs px-2 py-0.5 rounded bg-blue-100 text-blue-800 hover:bg-blue-200 dark:bg-blue-900 dark:text-blue-200 dark:hover:bg-blue-800 transition-colors"> </a>'),pa=L('<div class="flex gap-1"></div>'),wa=L('<article class="article-card bg-white dark:bg-gray-800 rounded-lg shadow-md overflow-hidden hover:shadow-lg transition-shadow"><!> <div class="p-6"><h2 class="text-xl font-bold mb-2 text-gray-900 dark:text-white"><a class="hover:text-blue-600 dark:hover:text-blue-400"> </a></h2> <p class="text-gray-600 dark:text-gray-300 mb-4"> </p> <div class="flex justify-between items-center"><time class="text-sm text-gray-500 dark:text-gray-400"> </time> <!></div></div></article>');function Oe(t,a){$(a,!1);const e=G();let r=B(a,"post",8);console.log("--- post ---"),console.log(r());function s(){return r().data?{title:r().data.title,description:r().data.description,pubDate:r().data.pubDate,tags:r().data.tags||[],heroImage:r().data.heroImage}:{title:r().title,description:r().description,pubDate:new Date(r().pubDate),tags:r().tags||[],heroImage:r().heroImage}}Re(()=>{},()=>{R(e,s())}),He(),Pe();var n=wa(),l=k(n);{var d=w=>{var T=ba();K(()=>{se(T,"src",(u(e),C(()=>u(e).heroImage))),se(T,"alt",(u(e),C(()=>u(e).title)))}),I(w,T)};q(l,w=>{u(e),C(()=>u(e).heroImage)&&w(d)})}var v=O(l,2),g=k(v),f=k(g),m=k(f,!0);E(f),E(g);var _=O(g,2),p=k(_,!0);E(_);var c=O(_,2),x=k(c),b=k(x,!0);E(x);var P=O(x,2);{var y=w=>{var T=pa();de(T,5,()=>(u(e),C(()=>u(e).tags)),ce,(S,o)=>{var h=xa(),i=k(h);E(h),K(()=>{se(h,"href",`/blog/tag/${u(o)}/`),X(i,`#${u(o)??""}`)}),I(S,h)}),E(T),I(w,T)};q(P,w=>{u(e),C(()=>u(e).tags&&u(e).tags.length>0)&&w(y)})}E(c),E(v),E(n),K(w=>{se(f,"href",(Be(r()),C(()=>`/blog/${r().id||r().slug}/`))),X(m,(u(e),C(()=>u(e).title))),X(p,(u(e),C(()=>u(e).description))),X(b,w)},[()=>(u(e),C(()=>u(e).pubDate.toLocaleDateString("es-ES",{year:"numeric",month:"short",day:"numeric"})))]),I(t,n),ee()}function Pa(t,a){$(a,!1);const e=1,r=1;var s=oe(),n=Z(s);return q(n,l=>{}),I(t,s),J(a,"currentPage",e),J(a,"totalPages",r),ee({currentPage:e,totalPages:r})}var ya=L('<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"></div> <!>',1);function Ta(t,a){$(a,!1);let e=B(a,"posts",8);const r=!1,s=1,n=1,l=void 0;var d=ya(),v=Z(d);de(v,5,e,ce,(f,m)=>{Oe(f,{get post(){return u(m)}})}),E(v);var g=O(v,2);return q(g,f=>{}),I(t,d),J(a,"showPagination",r),J(a,"currentPage",s),J(a,"totalPages",n),J(a,"currentTag",l),ee({showPagination:r,currentPage:s,totalPages:n,currentTag:l})}var Sa=L("<a> </a>"),Ea=L('<h1 class="text-4xl font-extrabold mb-6"> </h1> <div class="mb-8 flex flex-wrap gap-2"><a href="/blog/">Todos los artículos</a> <!></div>',1);function Ia(t,a){let e=B(a,"currentTag",8),r=B(a,"allTags",8);var s=Ea(),n=Z(s),l=k(n,!0);E(n);var d=O(n,2),v=k(d),g=O(v,2);de(g,1,r,ce,(f,m)=>{var _=Sa(),p=k(_);E(_),K(()=>{se(_,"href",`/blog/tag/${u(m)}/`),Ee(_,1,`text-xs px-2 py-0.5 rounded font-semibold ${e()===u(m)?"bg-blue-500 text-white":"bg-blue-100 text-blue-800 hover:bg-blue-200"}`),X(p,`#${u(m)??""}`)}),I(f,_)}),E(d),K(()=>{X(l,e()?`Artículos con tag: ${e()}`:"Artículos, Tutoriales & Historias"),Ee(v,1,`text-xs px-2 py-0.5 rounded font-semibold ${e()?"bg-blue-100 text-blue-800 hover:bg-blue-200":"bg-blue-500 text-white"}`)}),I(t,s)}var Da=L('<div class="mt-2 text-sm text-gray-600"> </div>'),Ca=L('<div class="mb-10"><input type="text" placeholder="Buscar artículos..." class="w-full md:w-1/2 px-4 py-2 rounded border border-gray-300 dark:border-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500 transition"/> <!></div>');function ka(t,a){$(a,!1);let e=B(a,"searchQuery",12),r=B(a,"isSearching",8),s=B(a,"resultsCount",8);const n=va();function l(m){n("search",m.target.value)}Pe();var d=Ca(),v=k(d);ca(v);var g=O(v,2);{var f=m=>{var _=Da(),p=k(_);E(_),K(()=>X(p,`${s()??""} resultado${s()!==1?"s":""} encontrado${s()!==1?"s":""}`)),I(m,_)};q(g,m=>{r()&&m(f)})}E(d),ma(v,e),ua("input",v,l),I(t,d),ee()}var Aa=L('<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"></div>'),Ma=L('<div class="text-center py-12"><p class="text-gray-500 dark:text-gray-400 text-lg"> </p></div>');function La(t,a){$(a,!1);const e=[];let r=B(a,"searchQuery",8);console.log("--- filteredPosts ---"),console.log(e);var s=oe(),n=Z(s);{var l=v=>{var g=Aa();de(g,5,()=>e,ce,(f,m)=>{Oe(f,{get post(){return u(m)}})}),E(g),I(v,g)},d=v=>{var g=Ma(),f=k(g),m=k(f);E(f),E(g),K(()=>X(m,`No se encontraron artículos que coincidan con "${r()??""}"`)),I(v,g)};q(n,v=>{C(()=>e&&e.length>0)?v(l):v(d,!1)})}return I(t,s),J(a,"filteredPosts",e),ee({filteredPosts:e})}var Na=L('<div class="text-center py-12"><div class="inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"></div> <p class="mt-2 text-gray-500">Cargando índice de búsqueda...</p></div>'),Ra=L('<div class="text-center py-12"><div class="inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"></div> <p class="mt-2 text-gray-500">Buscando artículos...</p></div>'),Ha=L("<!> <!>",1),Ba=L('<div class="main-container py-24"><!> <!> <!></div>');function Ya(t,a){$(a,!1);const e=G();let r=B(a,"postsResult",8),s=B(a,"currentTag",8),n=B(a,"totalPages",8),l=B(a,"currentPage",8),d=G(""),v=G([]),g=G(!1),f=G(!1),m=G(!1),_=[],p=G({currentPage:1,totalPages:1,totalPosts:0}),c;async function x(){if(!u(m)){R(m,!0);try{console.log("Loading search index...");const i=await fetch("/api/posts.json");i.ok?(_=await i.json(),console.log(`Search index loaded with ${_.length} posts`)):console.error("Failed to load search index:",i.status,i.statusText)}catch(i){console.error("Failed to load search index:",i)}finally{R(m,!1)}}}function b(i,A=1){if(!i.trim()){R(g,!1),R(v,[]);return}if(!_||_.length===0){console.warn("Search index not loaded yet"),R(f,!1);return}R(f,!0),R(g,!0),setTimeout(()=>{const V=i.toLowerCase(),H=_.filter(M=>{const U=M.title.toLowerCase(),ne=M.description.toLowerCase(),fe=M.tags.join(" ").toLowerCase(),ve=U.includes(V)||ne.includes(V)||fe.includes(V),te=!s()||M.tags.includes(s());return ve&&te});H.sort((M,U)=>new Date(U.pubDate).getTime()-new Date(M.pubDate).getTime());const D=12,N=H.length,Q=Math.ceil(N/D),F=(A-1)*D,z=F+D,ae=H.slice(F,z);R(v,ae),R(p,{currentPage:A,totalPages:Q,totalPosts:N,hasNextPage:A<Q,hasPrevPage:A>1}),R(f,!1)},100)}function P(i){R(d,i),c&&clearTimeout(c),c=setTimeout(()=>{!_||_.length===0?x().then(()=>{b(i,1)}):b(i,1)},300)}da(()=>{x()}),Re(()=>Be(r()),()=>{R(e,Array.from(new Set(r().flatMap(i=>i.data.tags??[]))))}),He(),Pe();var y=Ba(),w=k(y);Ia(w,{get currentTag(){return s()},get allTags(){return u(e)}});var T=O(w,2);ka(T,{get isSearching(){return u(g)},get resultsCount(){return u(p),C(()=>u(p).totalPosts)},get searchQuery(){return u(d)},set searchQuery(i){R(d,i)},$$events:{search:i=>P(i.detail)},$$legacy:!0});var S=O(T,2);{var o=i=>{var A=Na();I(i,A)},h=i=>{var A=oe(),V=Z(A);{var H=N=>{var Q=Ra();I(N,Q)},D=N=>{var Q=oe(),F=Z(Q);{var z=M=>{var U=Ha(),ne=Z(U);La(ne,{get filteredPosts(){return u(v)},get searchQuery(){return u(d)}});var fe=O(ne,2);{var ve=te=>{Pa(te,{get currentPage(){return u(p),C(()=>u(p).currentPage)},get totalPages(){return u(p),C(()=>u(p).totalPages)}})};q(fe,te=>{u(p),C(()=>u(p).totalPages>1)&&te(ve)})}I(M,U)},ae=M=>{{let U=Ce(()=>n()>1);Ta(M,{get posts(){return r()},get showPagination(){return u(U)},get currentPage(){return l()},get totalPages(){return n()},get currentTag(){return s()}})}};q(F,M=>{u(g)?M(z):M(ae,!1)},!0)}I(N,Q)};q(V,N=>{u(f)?N(H):N(D,!1)},!0)}I(i,A)};q(S,i=>{u(m)?i(o):i(h,!1)})}E(y),I(t,y),ee()}export{Ya as default};
