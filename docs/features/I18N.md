# Internationalization (i18n) Feature

## Overview

The website supports multiple languages using a folder-based routing approach:
- English (default): `/`
- Spanish: `/es/`

## Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    i18n Flow                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  Route Structure:                                            â”‚
â”‚  â”œâ”€â”€ / (English - default)                                  â”‚
â”‚  â”‚   â”œâ”€â”€ /blog                                              â”‚
â”‚  â”‚   â”œâ”€â”€ /about                                             â”‚
â”‚  â”‚   â””â”€â”€ /contact                                           â”‚
â”‚  â””â”€â”€ /es (Spanish)                                          â”‚
â”‚      â””â”€â”€ /es (homepage only currently)                      â”‚
â”‚                                                              â”‚
â”‚  Language Detection:                                         â”‚
â”‚  â””â”€â”€ Page â†’ lang prop â†’ Header/Footer â†’ Display            â”‚
â”‚                                                              â”‚
â”‚  Language Switching:                                         â”‚
â”‚  â””â”€â”€ Header dropdown â†’ Navigate to /{lang}/                 â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Current Implementation

### Supported Languages

| Code | Language | Base Path |
|------|----------|-----------|
| `en` | English | `/` |
| `es` | Spanish | `/es/` |

### Route Structure

```
pages/
â”œâ”€â”€ index.astro          # / (English)
â”œâ”€â”€ about.astro          # /about (English)
â”œâ”€â”€ contact.astro        # /contact (English)
â”œâ”€â”€ blog/                # /blog/* (English)
â””â”€â”€ es/
    â””â”€â”€ index.astro      # /es (Spanish)
```

## Components

| Component | Role |
|-----------|------|
| `MainLayout.astro` | Accepts `lang` prop, sets `<html lang>` |
| `Header.svelte` | Language switcher dropdown |
| `MobileMenu.svelte` | Mobile language switcher |

## Language Prop Flow (Page Wrapper Pattern)

Pages use the **Page wrapper pattern**: thin wrappers in `src/pages/` pass `lang` as a string literal to shared `*Page.astro` components in `src/components/pages/`, which handle `MainLayout` internally.

**Thin wrapper** (`src/pages/about.astro`):
```astro
---
import AboutPage from '@/components/pages/AboutPage.astro';
---
<AboutPage lang="en" />
```

**Page component** (`src/components/pages/AboutPage.astro`):
```astro
---
import MainLayout from '@/layouts/MainLayout.astro';
import { getTranslations } from '@/lib/translations';
import type { Language } from '@/lib/i18n';

interface Props { lang: Language; }
const { lang } = Astro.props;
const t = getTranslations(lang);
---
<MainLayout lang={lang} title={t.aboutPage.title} description={t.aboutPage.description}>
  <!-- Content using t.* for text -->
</MainLayout>
```

**MainLayout** uses `lang` for `<html lang>`, `Header`, and `Footer`:

```html
<html lang={lang}>
  <Header client:load {lang} />
  <main><slot /></main>
  <Footer {lang} />
</html>
```

## Language Switcher

In `Header.svelte`:

```svelte
<div class="relative group">
  <button>
    {#if lang === "es"}
      ğŸ‡ªğŸ‡¸ ES
    {:else}
      ğŸ‡¬ğŸ‡§ EN
    {/if}
  </button>
  
  {#if languageOpen}
    <div class="dropdown">
      {#if lang === "es"}
        <a href="/">ğŸ‡¬ğŸ‡§ EN</a>
      {:else}
        <a href="/es">ğŸ‡ªğŸ‡¸ ES</a>
      {/if}
    </div>
  {/if}
</div>
```

## Adding a New Language

The architecture is designed so adding a new language requires **zero changes** to page components or `MainLayout`:

### 1. Update i18n config (`src/lib/i18n.ts`)

- Add the language code to the `Language` type union (e.g., `'en' | 'es' | 'fr'`)
- Add a `LanguageConfig` entry to the `LANGUAGES` registry

### 2. Add translations (`src/lib/translations/`)

- Create `src/lib/translations/fr.ts` exporting a complete `SiteTranslations` object
- Import the new locale in `src/lib/translations/index.ts` and add to the `translations` record

### 3. Create thin page wrappers (`src/pages/fr/`)

Copy wrappers from `src/pages/es/` and change `lang` value. Each file is 3 lines:

```astro
---
// src/pages/fr/index.astro
import HomePage from '@/components/pages/HomePage.astro';
---
<HomePage lang="fr" />
```

No changes to `*Page.astro` components or `MainLayout` are needed â€” they already use `getTranslations(lang)` and work with any language.

### 4. Create blog content directory

Create `src/content/blog/fr/` for translated blog posts.

### 5. Verify

```bash
npm run biome:check && npm run astro:check && npm run build
```

## Current Implementation Status

All of these are **already implemented**:

- **Content Collections i18n**: Blog posts split by language in `src/content/blog/en/` and `src/content/blog/es/`
- **UI Strings Translation**: Centralized in `src/lib/translations/` (modular locale files: `en.ts`, `es.ts`, `types.ts`, `index.ts`)
- **Page Wrapper Pattern**: Shared `*Page.astro` components in `src/components/pages/` handle `MainLayout` internally; thin wrappers in `src/pages/` and `src/pages/es/`
- **N-language ready**: Adding a new language requires zero changes to components (see "Adding a New Language" above)

## Best Practices

1. **Always pass `lang` prop** through component chain
2. **Set `<html lang>`** correctly for accessibility
3. **Keep URL structure consistent** across languages
4. **Don't mix languages** within a page
5. **Provide language switcher** on all pages

## Related Documentation

- [Layout Documentation](../../src/layouts/README.md)
- [Header Component](../../src/components/layout/README.md)
- [i18n Guide](../I18N_GUIDE.md)
