# RSS Feed Feature

## Overview

The website generates an RSS feed at `/rss.xml` containing all blog posts, allowing users to subscribe and receive updates in their RSS readers.

## Architecture

```
┌─────────────────────────────────────────────────────────────┐
│                    RSS Feed Flow                             │
├─────────────────────────────────────────────────────────────┤
│                                                              │
│  Build Time:                                                 │
│  └── pages/rss.xml.js executes                              │
│      ├── Fetches all blog posts from Content Collection     │
│      ├── Sorts by publication date                          │
│      └── Generates RSS XML via @astrojs/rss                 │
│                                                              │
│  Output:                                                     │
│  └── /rss.xml (static file)                                 │
│                                                              │
└─────────────────────────────────────────────────────────────┘
```

## Implementation

### Route File

**Location:** `src/pages/rss.xml.js`

```javascript
import rss from '@astrojs/rss';
import { getCollection } from 'astro:content';
import { SITE_TITLE, SITE_DESCRIPTION } from '@/lib/constances';

export async function GET(context) {
  const posts = await getCollection('blog');
  
  return rss({
    title: SITE_TITLE,
    description: SITE_DESCRIPTION,
    site: context.site,
    items: posts.map((post) => ({
      title: post.data.title,
      description: post.data.description,
      pubDate: post.data.pubDate,
      link: `/blog/${post.id}/`,
    })),
  });
}
```

### Configuration

Site URL is configured in `astro.config.mjs`:

```javascript
export default defineConfig({
  site: 'https://xergioalex.com',
  // ...
});
```

## RSS XML Structure

The generated RSS feed follows the RSS 2.0 specification:

```xml
<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0">
  <channel>
    <title>Astro Blog</title>
    <description>Welcome to my website!</description>
    <link>https://xergioalex.com</link>
    <item>
      <title>Post Title</title>
      <description>Post description</description>
      <pubDate>Mon, 31 Jan 2026 00:00:00 GMT</pubDate>
      <link>https://xergioalex.com/blog/post-slug/</link>
    </item>
    <!-- More items... -->
  </channel>
</rss>
```

## Discovery

### Auto-Discovery Link

Added in `BaseHead.astro`:

```html
<link
  rel="alternate"
  type="application/rss+xml"
  title={SITE_TITLE}
  href={new URL("rss.xml", Astro.site)}
/>
```

This allows RSS readers to automatically discover the feed from any page.

## Customization

### Adding More Fields

```javascript
items: posts.map((post) => ({
  title: post.data.title,
  description: post.data.description,
  pubDate: post.data.pubDate,
  link: `/blog/${post.id}/`,
  // Additional fields
  author: post.data.author,
  categories: post.data.tags,
  customData: `<media:content url="${post.data.heroImage}" />`,
})),
```

### Filtering Posts

```javascript
const posts = await getCollection('blog');
const publishedPosts = posts.filter(post => 
  post.data.pubDate <= new Date()
);
```

### Limiting Items

```javascript
const recentPosts = posts
  .sort((a, b) => b.data.pubDate - a.data.pubDate)
  .slice(0, 20);  // Last 20 posts only
```

### Custom Namespaces

```javascript
return rss({
  title: SITE_TITLE,
  description: SITE_DESCRIPTION,
  site: context.site,
  xmlns: {
    media: 'http://search.yahoo.com/mrss/',
    atom: 'http://www.w3.org/2005/Atom',
  },
  items: posts.map((post) => ({
    // ...
  })),
});
```

## Testing

### View Raw Feed

Visit `/rss.xml` in your browser to see the raw XML.

### Validate Feed

Use online validators:
- [W3C Feed Validation Service](https://validator.w3.org/feed/)
- [Feed Validator](https://www.feedvalidator.org/)

### Test in RSS Reader

Subscribe to your feed in an RSS reader like:
- Feedly
- Inoreader
- NetNewsWire

## Dependencies

The RSS feed uses the `@astrojs/rss` package:

```json
{
  "dependencies": {
    "@astrojs/rss": "^4.x.x"
  }
}
```

## Sitemap Integration

The RSS feed is complemented by the sitemap generated by `@astrojs/sitemap`.

Both are linked in `BaseHead.astro`:

```html
<link rel="sitemap" href="/sitemap-index.xml" />
<link rel="alternate" type="application/rss+xml" href="/rss.xml" />
```

## Related Documentation

- [API Reference](../API_REFERENCE.md)
- [Content Collections](../../src/content/README.md)
- [BaseHead Component](../../src/components/README.md)
