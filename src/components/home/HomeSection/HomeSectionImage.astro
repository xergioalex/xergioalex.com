---
interface Props {
  image: string;
}

const { image } = Astro.props;
const isRaster = /\.(png|jpe?g)$/i.test(image);
const webpSrc = isRaster ? image.replace(/\.(png|jpe?g)$/i, '.webp') : null;
---

<div class="relative">
  {isRaster && webpSrc ? (
    <picture>
      <source srcset={webpSrc} type="image/webp" />
      <img
        src={image}
        alt="Sergio Alex"
        width={600}
        height={480}
        class="max-w-full block sm:min-w-[320px] md:min-w-[480px]"
        loading="lazy"
      />
    </picture>
  ) : (
    <img
      src={image}
      alt="Sergio Alex"
      width={600}
      height={480}
      class="max-w-full block sm:min-w-[320px] md:min-w-[480px]"
      loading="lazy"
    />
  )}
</div>
