---
import PageHero from '@/components/pages/PageHero.astro';
import PageSection from '@/components/pages/PageSection.astro';
import SkillBadge from '@/components/pages/SkillBadge.astro';
import TimelineItem from '@/components/pages/TimelineItem.astro';
import MainLayout from '@/layouts/MainLayout.astro';
import type { Language } from '@/lib/translations';
import { getTranslations } from '@/lib/translations';

const lang: Language = 'es';
const t = getTranslations(lang);
---

<MainLayout lang={lang} title={t.cvPage.title} description={t.cvPage.description}>
  <PageHero
    title={t.cvPage.title}
    subtitle={t.cvPage.subtitle}
    image="/images/profile.png"
  />

  <PageSection background="white" title={t.cvPage.summaryTitle} description={t.cvPage.summaryText} />

  <PageSection background="gray" title={t.cvPage.experienceTitle}>
    <ol class="relative">
      {t.cvPage.experiences.map((exp, index) => (
        <TimelineItem
          title={exp.role}
          subtitle={exp.company}
          period={exp.period}
          description={exp.description}
          highlights={exp.highlights}
          isLast={index === t.cvPage.experiences.length - 1}
        />
      ))}
    </ol>
  </PageSection>

  <PageSection background="white" title={t.cvPage.educationTitle}>
    <ol class="relative">
      {t.cvPage.educations.map((edu, index) => (
        <TimelineItem
          title={edu.degree}
          subtitle={edu.institution}
          period={edu.period}
          description={edu.description}
          isLast={index === t.cvPage.educations.length - 1}
        />
      ))}
    </ol>
  </PageSection>

  <PageSection
    background="gray"
    title={t.cvPage.skillsTitle}
    description={t.cvPage.skillsIntroText}
  >
    <div class="space-y-8">
      {t.cvPage.skillCategories.map((cat) => (
        <div>
          <h3 class="text-lg font-bold text-gray-900 dark:text-white mb-3">{cat.category}</h3>
          <div class="flex flex-wrap gap-2">
            {cat.skills.map((skill) => (
              <SkillBadge label={skill} />
            ))}
          </div>
        </div>
      ))}
    </div>
  </PageSection>

  <PageSection background="white" title={t.cvPage.languagesTitle}>
    <ul class="space-y-3 max-w-md">
      {t.cvPage.languages.map((lang) => (
        <li class="flex items-center justify-between p-3 rounded-lg bg-gray-50 dark:bg-gray-800">
          <span class="font-medium text-gray-900 dark:text-white">{lang.language}</span>
          <span class="text-sm text-gray-500 dark:text-gray-400">{lang.level}</span>
        </li>
      ))}
    </ul>
  </PageSection>

  <PageSection background="gray" title="">
    <div class="text-center">
      <a
        href="/es/contact"
        class="inline-flex items-center px-6 py-3 rounded-lg bg-secondary text-white font-semibold hover:bg-secondary/90 transition-colors duration-200"
      >
        {t.cvPage.ctaText}
      </a>
    </div>
  </PageSection>
</MainLayout>
