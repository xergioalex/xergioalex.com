---
import BlogPaginationPage from '@/components/pages/blog/BlogPaginationPage.astro';
import { getBlogPosts } from '@/lib/blog';
import type { Language } from '@/lib/i18n';
import type { BlogPostsResultType } from '@/lib/types';

const lang: Language = 'en';

export async function getStaticPaths() {
  const lang: Language = 'en';
  const blogPostsResult: BlogPostsResultType = await getBlogPosts({
    lang,
    includeHidden: false,
  });
  const totalPages = blogPostsResult.totalPages;

  const paths = [];
  for (let i = 1; i <= totalPages; i++) {
    const pagePosts = await getBlogPosts({
      lang,
      page: i,
      includeHidden: false,
    });
    paths.push({
      params: { page: String(i) },
      props: { blogPostsResult: pagePosts },
    });
  }
  return paths;
}

const { blogPostsResult } = Astro.props;
---

<BlogPaginationPage lang={lang} blogPostsResult={blogPostsResult} />
