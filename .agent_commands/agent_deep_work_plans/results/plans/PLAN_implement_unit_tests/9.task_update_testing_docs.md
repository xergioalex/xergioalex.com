# Task 9: Update Testing Documentation

## 1. Context

**Purpose:** Update project documentation to reflect the new testing infrastructure.

**Where:**
- `docs/TESTING_GUIDE.md` — Main testing documentation (currently has placeholder content)
- `AGENTS.md` — Project-wide agent instructions (testing section needs update)

**Current state:**
- `docs/TESTING_GUIDE.md` contains recommendations but states testing is "NOT CONFIGURED"
- `AGENTS.md` section 5 says "Testing (NOT YET CONFIGURED)" with placeholder info
- Pre-commit checklist in AGENTS.md does not include `npm run test`

**Dependencies:** Tasks 1-8 must be completed.

## 2. Read Before Starting

- All previous task Completion & Logs: gather coverage numbers, test counts, any issues encountered
- Current `docs/TESTING_GUIDE.md` content
- Current `AGENTS.md` testing sections

## 3. Goal

Update `docs/TESTING_GUIDE.md` with actual Vitest setup instructions, test writing guide, and fixture usage. Update `AGENTS.md` to reflect that testing is now configured. Add `npm run test` to the pre-commit checklist.

## 4. Instructions

> **Before starting:** Re-read the plan README section 1 (Goal) to ensure this task's work aligns with the overall objective.

**Skill:** `/doc-edit`

### Step 1: Read current documentation

Read both files completely:
- `docs/TESTING_GUIDE.md`
- `AGENTS.md` — Focus on sections mentioning testing

### Step 2: Update `docs/TESTING_GUIDE.md`

Rewrite with actual content. The guide should cover:

1. **Overview** — Vitest is configured for unit/component tests
2. **Running Tests**
   - `npm run test` — Single run
   - `npm run test:watch` — Watch mode
   - `npm run test:coverage` — With coverage report
3. **Test Structure**
   ```
   tests/
   ├── unit/
   │   ├── lib/        # Utility function tests
   │   └── components/ # Svelte component tests
   ├── fixtures/       # Mock data
   └── helpers/        # Test setup
   ```
4. **Writing New Tests**
   - File naming: `*.test.ts`
   - Use `describe`/`it` blocks
   - Import fixtures from `tests/fixtures/`
   - For lib functions: direct import and test
   - For Svelte components: use `@testing-library/svelte`
5. **Configuration**
   - `vitest.config.ts` at project root
   - happy-dom environment
   - `@/` path alias support
   - Coverage targets: 80%+ on `src/lib/`
6. **Coverage** — Actual numbers from Task 4-8
7. **Conventions** — Follow AGENTS.md patterns

### Step 3: Update `AGENTS.md` testing section

Find and update section "### 5. Testing (NOT YET CONFIGURED)":
- Change header to "### 5. Testing"
- Replace placeholder content with actual setup info
- Reference `docs/TESTING_GUIDE.md` for details
- Update the commands section

### Step 4: Update pre-commit checklist in `AGENTS.md`

Find the pre-commit checklist and add `npm run test` to the validation steps:

```markdown
- [ ] `npm run test` passes (all unit tests)
```

### Step 5: Update Quick Commands section in `AGENTS.md`

Add test commands to the Quick Commands section:

```bash
# Testing
npm run test               # Run unit tests
npm run test:watch         # Watch mode
npm run test:coverage      # With coverage report
```

### Step 6: Update "Common Mistakes to Avoid" in `AGENTS.md`

Remove or update item 8: `Use npm run test expecting real tests (not configured yet)` — tests are now configured.

## 5. Acceptance Criteria

- [ ] `docs/TESTING_GUIDE.md` fully updated with actual setup and usage
- [ ] `AGENTS.md` testing section updated (no longer says "NOT CONFIGURED")
- [ ] Pre-commit checklist includes `npm run test`
- [ ] Quick Commands section includes test commands
- [ ] "Common Mistakes" section updated
- [ ] All documentation in English
- [ ] `npm run biome:check` passes

## 6. Validation

```bash
# Verify biome compliance
npm run biome:check

# Verify all tests still pass
npm run test

# Verify build
npm run build
```

Agent-based validation:
- Delegate to the `reviewer` agent for documentation quality review

## 7. Execution Checklist

- [ ] Read current `docs/TESTING_GUIDE.md`
- [ ] Read current `AGENTS.md` testing sections
- [ ] Gather coverage numbers from previous tasks
- [ ] Update `docs/TESTING_GUIDE.md`
- [ ] Update `AGENTS.md` testing section
- [ ] Update pre-commit checklist
- [ ] Update Quick Commands
- [ ] Update Common Mistakes
- [ ] Run `npm run biome:check`
- [ ] Run `npm run test`
- [ ] Update plan README `[ ] → [x]`
- [ ] Update PROGRESS.md
- [ ] Commit changes
- [ ] Update log below

## 8. Completion & Log

**Status:** Completed

- Files updated: docs/TESTING_GUIDE.md, AGENTS.md
- Documentation sections changed: TESTING_GUIDE.md (full rewrite), AGENTS.md (section 5, Quick Commands, Pre-Commit Checklist, Common Mistakes item 8, docs reference)
- Notes: Removed all placeholder/future content and replaced with actual setup details
