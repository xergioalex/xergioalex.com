# Agent Deep Work Plans

## Overview

This directory contains the **official system for creating and executing long-duration, multi-task deep-work plans** for AI agents (Claude Code, Cursor AI, OpenAI Codex).

The system is designed to enable agents to:

- **Work autonomously for extended periods** (hours, overnight sessions)
- **Focus on one task at a time** with clear, detailed instructions
- **Follow a strict execution order** with built-in validation
- **Maintain audit trails** of all work completed
- **Keep plans modular and disposable** (separate from main repository)

---

## Directory Structure

```text
.agent_commands/agent_deep_work_plans/
├─ README.md                                      ← you are here
├─ GUIDE_TO_CREATE_AGENT_DEEP_WORK_PLANS.md      ← comprehensive guide
├─ example_prompts/                               ← prompts & examples (⭐ START HERE)
│  ├─ README.md                                   ← quick index
│  ├─ CREATE_PLAN.md                              ← how to create plans
│  ├─ EXECUTE_PLAN.md                             ← how to execute plans
│  ├─ RESUME_PLAN.md                              ← how to resume plans
└─ results/                                       ← git-ignored, temporary execution artifacts
   ├─ drafts/                                     ← git-ignored, your workspace
   │  └─ .gitkeep                                 ← keeps folder in git
   └─ plans/                                      ← git-ignored, temporary execution plans
      ├─ .gitkeep                                 ← keeps folder in git
      ├─ README.md                                ← structure documentation (kept in git)
      ├─ PROMPTS_TEMPLATE.md                      ← template for generating PROMPTS.md (kept in git)
      ├─ VALIDATION_CHECKLIST.md                  ← common validation commands reference (kept in git)
      └─ PLAN_{plan_title}/                       ← temporary plans (git-ignored)
         ├─ README.md                             ← plan overview and task index
         ├─ PROMPTS.md                            ← ready-to-use prompts for this plan
         ├─ PROGRESS.md                           ← running progress summary
         ├─ analysis_results/                     ← analysis outputs & reports
         │   └─ EXECUTIVE_REPORT.md              ← generated by mandatory final task
         ├─ 1.task_{task_title}.md                 ← task 1 (detailed instructions)
         ├─ 2.task_{task_title}.md                 ← task 2
         ├─ ...
         ├─ N-1.task_skills_agents_discovery.md   ← MANDATORY: second-to-last task
         └─ N.task_executive_report.md            ← MANDATORY: final task
```

---

## Key Concepts

### 1. Plans

A **plan** is a folder under `results/plans/PLAN_{plan_title}/` that contains:

- A **plan README** (`README.md`) with:
  - Overall goal and context
  - Global guidelines and constraints
  - Ordered task list with checkboxes
  - Execution rules for agents
- A **PROGRESS.md** with running task summaries and key decisions
- An **analysis_results/** folder for reports and artifacts
- Multiple **task files** (`N.task_{task_title}.md`) with detailed, atomic instructions
- A mandatory **Skills & Agents Discovery** task (second-to-last)
- A mandatory **Executive Report** task (last) that generates `analysis_results/EXECUTIVE_REPORT.md`

### 2. Tasks

Each **task** is a single-focus, self-contained work unit with:

- Clear context and goal
- Step-by-step instructions
- Acceptance criteria
- Validation commands
- Execution checklist
- Completion log (filled by agent)

Tasks are executed **strictly in order**, one at a time.

### 3. Agent Execution Model

When executing a plan, an agent must:

1. Read the plan README to understand the overall objective
2. Work on the **first unchecked task** in the task list
3. Follow the task's instructions completely
4. Run all validation commands
5. Update the task's completion log
6. Mark the task as complete in the plan README
7. Update PROGRESS.md with task summary
8. Commit changes
9. Move to the next task

**Critical rules:**

- ✅ Work on **one task at a time**
- ✅ Follow the **strict order** defined in the plan README
- ✅ **Never skip validation**
- ✅ **Stop and log** if validation fails or something is unclear
- ⚠️ **ALWAYS mark tasks as complete** (see section below)
- ❌ Do not reorder or skip tasks
- ❌ Do not work on multiple tasks in parallel

---

## ⚠️ CRITICAL: Task Completion Tracking (MANDATORY)

> **THIS IS THE MOST IMPORTANT RULE OF THE ENTIRE SYSTEM**

**IMMEDIATELY after completing EACH task, the agent MUST:**

1. ✅ **Update the plan README.md** - Change `[ ]` to `[x]` for the completed task
2. ✅ **Update the Plan Status section** - Update completed count (e.g., "5/25")
3. ✅ **Update the task file's Completion & Log section** - Record status and summary

### Why This Is Critical

| If NOT marked as complete          | If properly marked                |
| ---------------------------------- | --------------------------------- |
| ❌ Resume will REDO completed work | ✅ Resume continues correctly     |
| ❌ Progress is lost                | ✅ Progress is preserved          |
| ❌ Multi-day plans become unusable | ✅ Multi-day plans work perfectly |
| ❌ Time and resources wasted       | ✅ Efficient execution            |

### Verification After Each Task

Before moving to next task, verify:

```
□ Plan README task marked [x]
□ Plan Status count updated
□ Task file Completion & Log filled
□ PROGRESS.md updated with task summary
□ Changes committed
```

**See `GUIDE_TO_CREATE_AGENT_DEEP_WORK_PLANS.md` for detailed examples.**

---

## Quick Start

### Creating a New Plan

**Option 1: Manual creation**

1. Read `GUIDE_TO_CREATE_AGENT_DEEP_WORK_PLANS.md` (comprehensive guide)
2. Create a new folder: `results/plans/PLAN_{plan_title}/`
3. Create the plan README following the structure in the guide
4. Create task files (`N.task_{task_title}.md`) for each task

**Option 2: Ask an agent**

Simply tell the agent:

> "Create a new deep work plan following the structure defined in `.agent_commands/agent_deep_work_plans/GUIDE_TO_CREATE_AGENT_DEEP_WORK_PLANS.md`. Break it down into atomic tasks and create all necessary files. Objective: [objective]"

### Executing a Plan

Tell the agent:

> "Execute the plan at `.agent_commands/agent_deep_work_plans/results/plans/PLAN_{plan_title}/README.md`. Follow the execution rules: work on one task at a time, in order, run validations, and update logs."

### Resuming an Interrupted Plan ⭐

**When:** Internet loss, IDE crash, agent hitting limits, or intentional breaks.

Tell the agent:

> "RESUME the plan at `.agent_commands/agent_deep_work_plans/results/plans/PLAN_{plan_title}/README.md`. Check task status, find the first unchecked task, review git history, and continue from there. Never redo completed tasks."

**For detailed resume instructions with examples, see:** [`example_prompts/RESUME_PLAN.md`](./example_prompts/RESUME_PLAN.md)

---

## Why This System Exists

### Problem

Traditional agent workflows struggle with:

- **Loss of focus** when working on multiple tasks simultaneously
- **No clear execution order** leading to incomplete or inconsistent work
- **Lack of validation** causing bugs to accumulate
- **Poor audit trails** making it hard to understand what was done
- **Context overload** from trying to keep entire large objectives in working memory

### Solution

This system provides:

- ✅ **Single-task focus** - Agent works on exactly one thing at a time
- ✅ **Clear execution order** - Tasks are numbered and must be completed sequentially
- ✅ **Built-in validation** - Each task defines validation commands that must pass
- ✅ **Audit trails** - Every task logs what was done, when, and results
- ✅ **Modular context** - Each task file is self-contained and focused
- ✅ **Disposability** - Plans are temporary and don't clutter the main repo

---

## Naming Conventions

### Plan folders

Format: `PLAN_{plan_title}`

Rules:

- Lowercase
- Snake case
- Short and descriptive

Examples:

- `PLAN_ui_showcase_expansion`
- `PLAN_refactor_checkin_engine`
- `PLAN_docs_reorganization`

### Task files

Format: `N.task_{task_title}.md`

Rules:

- **N** is the execution order (1, 2, 3, ...)
- `{task_title}` is a short description
- Lowercase, snake case

Examples:

- `1.task_create_buttons_component_page.md`
- `2.task_add_integration_tests_for_checkins.md`
- `3.task_update_checkins_docs.md`

---

## Integration with Project Standards

This system follows all project standards defined in `CLAUDE.md`:

- ✅ **English only** - All plan files, tasks, and logs in English
- ✅ **Type hints** - All TypeScript code must use explicit type annotations (strict mode)
- ✅ **Test naming** - Use `*.spec.ts` pattern (NOT `test_*.ts` or `*_test.ts`)
- ✅ **Import order** - Follow convention: Node.js native → third-party → internal → types
- ✅ **Logging** - Use Logger from `src/common/logger.ts` (NEVER `console.*`)
- ✅ **Documentation updates** - Tasks should update relevant docs
- ✅ **Code quality** - Tasks must run `codecheck` or individual validations (`npm run eslint:check`, `npm run test`)

Plans should reference and enforce these standards in their global guidelines.

---

## Plan Lifecycle

1. **Creation** - Plan folder and task files are generated (including `analysis_results/`, `PROGRESS.md`, mandatory final tasks)
2. **Execution** - Agent works through tasks sequentially, updating PROGRESS.md after each
3. **Discovery** - Skills & Agents Discovery evaluates work for reusable patterns (second-to-last task)
4. **Reporting** - Executive Report generates a comprehensive summary in `analysis_results/EXECUTIVE_REPORT.md` (last task)
5. **Completion** - All tasks marked as done
6. **Archive/Delete** - Plan folder can be removed (it's git-ignored)
7. **Documentation** - Important learnings are captured in permanent docs

**Plans are temporary execution artifacts, not permanent repository content.**

---

## Best Practices

### When creating plans

- ✅ Break large objectives into **atomic tasks** (each task = one clear deliverable)
- ✅ Order tasks logically (dependencies first, then dependent work)
- ✅ Make each task **self-contained** (agent can complete it by reading only that file)
- ✅ Include **clear acceptance criteria** (how do we know it's done?)
- ✅ Define **validation commands** (what must pass before marking complete?)
- ✅ Provide **sufficient context** (tech stack, file locations, patterns to follow)

### When executing plans

- ✅ Read the entire task file before starting
- ✅ Follow instructions exactly as written
- ✅ Run all validations before marking complete
- ✅ Update logs with detailed information
- ✅ Commit after each task
- ✅ Stop and log if something is unclear or validation fails

### When validations fail

- ❌ Do **not** mark the task as complete
- ✅ Log the failure in the task's completion log
- ✅ Document what failed and why
- ✅ Stop execution and wait for human intervention
- ✅ Do **not** continue to the next task

---

## Examples

### Example 1: UI Expansion Plan

**Goal:** Expand UI showcase with new component pages

**Structure:**

```text
results/plans/PLAN_ui_showcase_expansion/
├─ README.md                                    # Goal, context, task list
├─ PROMPTS.md                                   # Ready-to-use prompts
├─ PROGRESS.md                                  # Running progress summary
├─ analysis_results/                            # Analysis outputs & reports
├─ 1.task_create_buttons_page.md                # Create buttons showcase
├─ 2.task_create_forms_page.md                  # Create forms showcase
├─ 3.task_create_modals_page.md                 # Create modals showcase
├─ 4.task_update_showcase_index.md              # Update main index
├─ 5.task_skills_agents_discovery.md            # MANDATORY: Evaluate for new skills
└─ 6.task_executive_report.md                   # MANDATORY: Executive report
```

### Example 2: Refactoring Plan

**Goal:** Refactor Smart Check-ins engine for better maintainability

**Structure:**

```text
results/plans/PLAN_refactor_checkin_engine/
├─ README.md                                    # Goal, context, task list
├─ 1.task_extract_service_layer.md              # Move logic to services
├─ 2.task_add_type_hints.md                     # Add complete type coverage
├─ 3.task_write_integration_tests.md            # Test all edge cases
├─ 4.task_update_api_documentation.md           # Document new structure
└─ 5.task_update_architecture_docs.md           # Update ARCHITECTURE.md
```

### Example 3: Documentation Plan

**Goal:** Reorganize and expand project documentation

**Structure:**

```text
results/plans/PLAN_docs_reorganization/
├─ README.md                                    # Goal, context, task list
├─ 1.task_audit_existing_docs.md                # Review current state
├─ 2.task_create_new_structure.md               # Define new organization
├─ 3.task_migrate_content.md                    # Move content to new structure
├─ 4.task_add_missing_sections.md               # Fill gaps
└─ 5.task_update_cross_references.md            # Fix all links
```

### Example 4: Draft Examples ⭐

**Goal:** Show the draft lifecycle from basic to refined

**Status:** ✅ Reference examples

**Location:** `example_prompts/drafts_examples/`

**Examples:**

- **[DRAFT_EXAMPLE_basic.md](example_prompts/drafts_examples/DRAFT_EXAMPLE_basic.md)** - Basic draft for Lambda performance optimization
- **[DRAFT_EXAMPLE_refined.md](example_prompts/drafts_examples/DRAFT_EXAMPLE_refined.md)** - Refined version with full context

**Use these to understand:**

- ✅ How to start with a simple draft
- ✅ How to refine and expand prompts
- ✅ The difference between basic and refined drafts
- ✅ What information to include at each stage

### Example 5: Complete Plan Example ⭐

**Goal:** Add a "Related Posts" feature to the blog

**Status:** ✅ Complete reference example

**Location:** `example_prompts/PLAN_EXAMPLE_add_blog_feature/`

**Structure:**

```text
example_prompts/PLAN_EXAMPLE_add_blog_feature/
├─ README.md                                # Complete plan with 6 tasks
├─ PROMPTS.md                               # Ready-to-use prompts
├─ PROGRESS.md                              # Running progress summary
├─ analysis_results/                        # Analysis outputs & reports
├─ 1.task_create_component.md              # Task 1: Create RelatedPosts component
├─ ... (user tasks)
├─ 5.task_skills_agents_discovery.md       # MANDATORY: Evaluate for new skills
└─ 6.task_executive_report.md              # MANDATORY: Executive report
```

**Use this as a reference** to see what a complete plan looks like with:

- ✅ Complete README with task list and mandatory final tasks
- ✅ Detailed task files with validation, acceptance criteria
- ✅ PROMPTS.md with ready-to-use prompts
- ✅ PROGRESS.md for running progress tracking
- ✅ analysis_results/ folder for reports
- ✅ Mandatory Skills & Agents Discovery and Executive Report tasks

### Creating Your Own Examples

When creating deep work plans for this repository, consider these typical scenarios:

**Common plan types:**

- **Performance** - Optimizing Lambda cold starts, reducing DynamoDB queries (see example plan)
- **Feature additions** - Adding new Lambda functions, platform integrations, or bot features
- **Refactoring** - Improving code structure, extracting service layers, adding type safety
- **Testing** - Expanding test coverage, adding integration tests, improving mock infrastructure
- **Documentation** - Creating or updating technical documentation, API guides, architecture docs
- **Library upgrades** - Updating npm packages with validation and testing

---

## Getting Help

- **⭐ Practical examples:** `example_prompts/` - Copy-paste ready prompts (start here!)
  - [`CREATE_PLAN.md`](./example_prompts/CREATE_PLAN.md) - How to create plans
  - [`EXECUTE_PLAN.md`](./example_prompts/EXECUTE_PLAN.md) - How to execute plans
  - [`RESUME_PLAN.md`](./example_prompts/RESUME_PLAN.md) - How to resume interrupted plans
  - [`drafts_examples/`](./example_prompts/drafts_examples/) - ⭐ Draft examples (basic → refined)
  - [`PLAN_EXAMPLE_add_blog_feature/`](./example_prompts/PLAN_EXAMPLE_add_blog_feature/) - ⭐ Complete plan example
- **Comprehensive guide:** `GUIDE_TO_CREATE_AGENT_DEEP_WORK_PLANS.md` - Technical specification and structure
- **Project standards:** `/home/node/app/CLAUDE.md` - Project-wide coding standards
- **Architecture guide:** `/home/node/app/docs/ARCHITECTURE.md` - System architecture patterns
- **Development commands:** `/home/node/app/docs/DEVELOPMENT_COMMANDS.md` - Command reference
- **Testing guide:** `/home/node/app/docs/TESTING_GUIDE.md` - Test conventions and patterns
- **Repository standards:** `/home/node/app/docs/STANDARDS.md` - Canonical coding rules

---

## Summary

This system enables AI agents to:

- Work autonomously on complex, multi-task objectives
- Maintain focus and quality through single-task execution
- Resume interrupted work without duplicating completed tasks
- Provide clear audit trails and validation at every step
- Keep the main repository clean and organized

**Getting started:**

- **For practical use:** See `example_prompts/` folder for copy-paste ready prompts
- **For technical details:** See `GUIDE_TO_CREATE_AGENT_DEEP_WORK_PLANS.md` for comprehensive specification
