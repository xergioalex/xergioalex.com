# Task 3: Integrate into Blog Post Page

## Context

The RelatedPosts component and utility function are ready. Now we need to integrate them into the blog post page.

## Goal

Add related posts section to `src/pages/blog/[...slug].astro`.

## Instructions

1. **Import** the RelatedPosts component and getRelatedPosts function

2. **Fetch** related posts in the frontmatter

3. **Add** the component after the post content

## Example Integration

```astro
---
import { getCollection, getEntry } from 'astro:content';
import MainLayout from '@/layouts/MainLayout.astro';
import RelatedPosts from '@/components/blog/RelatedPosts.svelte';
import { getRelatedPosts } from '@/lib/blog';

export async function getStaticPaths() {
  const posts = await getCollection('blog');
  return posts.map(post => ({
    params: { slug: post.id },
    props: { post },
  }));
}

const { post } = Astro.props;
const { Content } = await post.render();

// Get related posts
const relatedPosts = await getRelatedPosts(post, 3);
---

<MainLayout lang="en" title={post.data.title} description={post.data.description}>
  <article class="main-container py-24">
    <header>
      <h1>{post.data.title}</h1>
      <!-- ... -->
    </header>
    
    <div class="prose dark:prose-invert">
      <Content />
    </div>
    
    <!-- Related Posts Section -->
    <RelatedPosts client:visible posts={relatedPosts} />
  </article>
</MainLayout>
```

## Acceptance Criteria

- [ ] Component imported correctly
- [ ] Related posts fetched in frontmatter
- [ ] Component rendered after post content
- [ ] Uses `client:visible` for lazy hydration
- [ ] Page renders correctly

## Validation

```bash
npm run biome:check
npm run astro:check
npm run build
npm run dev  # Manual test: navigate to a blog post
```

## Execution Checklist

- [ ] Import component and function
- [ ] Fetch related posts
- [ ] Add component to template
- [ ] Run validation
- [ ] Manual test
- [ ] Commit: `feat: integrate related posts into blog page`

---

## Completion Log

**Status:** ‚è≥ Pending
**Completed:** 
**Notes:**
