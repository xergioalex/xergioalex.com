# Task 3: Analyze and Optimize Webpack Bundle

## 1. Context

Based on Task 2 profiling, optimize webpack bundle to reduce Lambda package size from 15MB to <8MB.

**Location:** `webpack.config.js`, `src/functions/botFlow/`

**Dependencies:** Tasks 1-2 completed

---

## 2. Goal

Reduce botFlow bundle size by 47% through webpack optimization techniques.

---

## 3. Instructions

1. **Install webpack-bundle-analyzer:**

   ```bash
   npm install --save-dev webpack-bundle-analyzer
   ```

2. **Analyze current bundle:**
   - Identify largest dependencies
   - Find duplicate dependencies
   - Locate unused code

3. **Enable tree shaking:**
   - Set `mode: 'production'` in webpack config
   - Use `sideEffects: false` in package.json
   - Ensure ES6 imports (not CommonJS)

4. **Implement code splitting:**
   - Split vendor bundles
   - Lazy load platform-specific code
   - Use dynamic imports for optional features

5. **Optimize production build:**
   - Enable minification (TerserPlugin)
   - Remove source maps from production
   - Use webpack DefinePlugin for environment

6. **Measure improvements:**
   ```bash
   npm run build
   du -sh .webpack/
   ```

---

## 4. Acceptance Criteria

- [ ] Bundle size reduced from 15MB to <8MB
- [ ] webpack-bundle-analyzer report generated
- [ ] Tree shaking enabled
- [ ] Code splitting implemented
- [ ] All tests still passing
- [ ] No breaking changes to functionality

---

## 5. Validation

```bash
npm run build
du -sh .webpack/  # Should show <8MB
npm run test
codecheck
```

---

## 6. Completion & Log

**Status:** Not started
